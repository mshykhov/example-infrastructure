# =============================================================================
# REDIS DEFAULTS - PRD ENVIRONMENT
# =============================================================================
# Bitnami Redis chart defaults for prd environment.
# Docs: https://github.com/bitnami/charts/tree/main/bitnami/redis
# Chart: oci://registry-1.docker.io/bitnamicharts/redis
#
# Service-specific values in deploy repo override these.
#
# NOTE: Image tags are managed by chart version (appVersion).
# Do NOT set image.tag - let the chart use its bundled version.
# =============================================================================

architecture: replication

auth:
  enabled: true

# Redis configuration (AOF for durability)
commonConfiguration: |-
  appendonly yes
  save ""

master:
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: "1"
      memory: 512Mi
  persistence:
    enabled: true
    storageClass: longhorn
    size: 5Gi
  pdb:
    create: true
    minAvailable: 1

replica:
  replicaCount: 2
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: "1"
      memory: 512Mi
  persistence:
    enabled: true
    storageClass: longhorn
    size: 5Gi
  pdb:
    create: true
    minAvailable: 1

sentinel:
  enabled: true
  quorum: 2
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

metrics:
  enabled: true
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi
  serviceMonitor:
    enabled: true
    interval: 30s
