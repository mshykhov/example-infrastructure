# =============================================================================
# PROTECTED SERVICES CONFIGURATION
# =============================================================================
# CHANGE THIS: Replace "tail876052" with your actual tailnet name
# Find it: Tailscale Admin Console -> Settings -> General -> Tailnet name
# =============================================================================

tailnet: tail876052

# =============================================================================
# oauth2-proxy configuration
# =============================================================================
oauth2Proxy:
  image: quay.io/oauth2-proxy/oauth2-proxy:v7.9.0
  replicas: 1

  # Auth URLs used in ingress annotations
  authUrl: "http://oauth2-proxy.oauth2-proxy.svc.cluster.local/oauth2/auth"
  authSignin: "https://$host/oauth2/start?rd=$escaped_request_uri"
  authResponseHeaders: "X-Auth-Request-User,X-Auth-Request-Email"

  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 64Mi

# =============================================================================
# Services to expose via Tailscale + NGINX Ingress + oauth2-proxy
# =============================================================================
services:
  longhorn:
    enabled: true
    namespace: longhorn-system
    backend:
      name: longhorn-frontend
      port: 80

  argocd:
    enabled: true
    namespace: argocd
    backend:
      name: argocd-server
      port: 443
      protocol: HTTPS
